<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Tool Auto D·ª± ƒêo√°n VIP - Anti Fake HWID</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@500;600;700&display=swap');

        :root { 
            --panel-scale: 1; 
            --neon-blue: #00f3ff;
            --neon-purple: #bc13fe;
            --gold: #ffaa00;
            --bg-dark: #070a10;
            --bg-glass: rgba(12, 16, 24, 0.85);
            --border-glass: rgba(0, 243, 255, 0.25);
        }
        
        * { box-sizing: border-box; }
        
        html,body { margin:0;padding:0;height:100%;background:var(--bg-dark);font-family: 'Rajdhani', sans-serif;color:#fff; overflow: hidden; }
        
        /* HI·ªÜU ·ª®NG N·ªÄN KHI ·ªû NGO√ÄI GAME */
        .overlay { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background: radial-gradient(circle at center, #111827 0%, #020617 100%); z-index:20000; }
        
        /* CARD ƒêƒÇNG NH·∫¨P VIP */
        .panel-card { width:440px; max-width:94vw; border-radius:16px; padding:30px; box-shadow: 0 0 40px rgba(0, 0, 0, 0.9), inset 0 0 20px rgba(0, 243, 255, 0.05); background: var(--bg-glass); border: 1px solid var(--border-glass); backdrop-filter: blur(15px); position: relative; overflow: hidden; }
        .panel-card::before { content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: conic-gradient(transparent, rgba(0, 243, 255, 0.1), transparent 30%); animation: rotate 4s linear infinite; pointer-events: none; z-index: -1; }
        @keyframes rotate { 100% { transform: rotate(1turn); } }
        
        .panel-card h2 { margin:0 0 10px 0; font-size:22px; text-align:center; text-transform: uppercase; font-family: 'Orbitron', sans-serif; letter-spacing: 1px; color: var(--neon-blue); text-shadow: 0 0 10px rgba(0,243,255,0.5); display:flex; align-items:center; justify-content:center; }
        .sub { font-size:15px; color:#9ca3af; text-align:center; margin-bottom:10px; font-weight: 500; }
        
        /* --------------------------------------------------- */
        /* CSS M·ªöI: GRID 2x2 CHO M√ÄN H√åNH CH·ªåN GAME CHU·∫®N APP */
        /* --------------------------------------------------- */
        .game-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; margin-top: 25px; }
        
        .btn-game { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 25px 10px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); color: #fff; font-weight: 700; font-family: 'Orbitron', sans-serif; font-size: 13px; text-transform: uppercase; letter-spacing: 1px; cursor: pointer; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden; box-shadow: 0 8px 20px rgba(0,0,0,0.4); text-shadow: 0 2px 4px rgba(0,0,0,0.8); }
        .btn-game::after { content: ''; position: absolute; top: 0; left: -100%; width: 50%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); transition: 0.5s; }
        
        .btn-game img { width: 52px; height: 52px; margin-bottom: 12px; border-radius: 14px; border: 2px solid rgba(255,255,255,0.9); box-shadow: 0 5px 15px rgba(0,0,0,0.6); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); object-fit: cover; }
        
        .btn-game:hover { transform: translateY(-5px); border-color: var(--neon-blue); box-shadow: 0 12px 25px rgba(0, 243, 255, 0.3); }
        .btn-game:hover img { transform: scale(1.15) translateY(-2px); border-color: var(--neon-blue); box-shadow: 0 0 15px rgba(0, 243, 255, 0.8); }
        .btn-game:hover::after { left: 200%; transition: 0.7s; }

        .bg-lc79 { background: linear-gradient(135deg, #064e3b, #10b981); }
        .bg-xd88 { background: linear-gradient(135deg, #78350f, #f59e0b); }
        .bg-betvip { background: linear-gradient(135deg, #881337, #e11d48); }
        .bg-sunwin { background: linear-gradient(135deg, #7c2d12, #ea580c); }
        /* --------------------------------------------------- */


        /* B·∫¢NG GI√Å VIP */
        .price-grid { display:flex; gap:6px; justify-content:space-between; margin:20px 0; }
        .price-item { flex:1; background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(0,0,0,0.5)); padding:12px 4px; border-radius:10px; text-align:center; border:1px solid rgba(255,170,0,0.3); box-shadow: inset 0 0 10px rgba(255,170,0,0.05); transition: transform 0.2s; }
        .price-item:hover { transform: translateY(-3px); border-color: var(--gold); box-shadow: 0 5px 15px rgba(255,170,0,0.2); }
        .price-item div:first-child { font-size:16px; color:var(--gold); font-family: 'Orbitron', sans-serif; font-weight: bold; text-shadow: 0 0 5px rgba(255,170,0,0.5); }
        .price-item div:last-child { font-size:12px; color:#cbd5e1; margin-top: 4px; text-transform: uppercase; }
        
        .input-row { display:flex; gap:10px; margin-top:10px; }
        input[type="text"]{ flex:1; padding:14px; border-radius:10px; border:1px solid rgba(0,243,255,0.4); background: rgba(0,0,0,0.6); color:#fff; outline:none; font-family: 'Orbitron', sans-serif; letter-spacing: 2px; font-size: 14px; transition: all 0.3s; }
        input[type="text"]:focus { border-color: var(--neon-blue); box-shadow: 0 0 15px rgba(0,243,255,0.3); }
        input[type="text"]::placeholder { color: #4b5563; letter-spacing: 0; font-family: 'Rajdhani', sans-serif; }
        
        /* N√öT B·∫§M CH√çNH TRONG M√ÄN NH·∫¨P KEY */
        .btn { padding:14px 20px; border-radius:10px; border:none; cursor:pointer; font-weight:700; font-size: 15px; color:#fff; transition: all 0.3s; display: flex; align-items: center; justify-content: center; text-transform: uppercase; letter-spacing: 1px; font-family: 'Orbitron', sans-serif; position: relative; overflow: hidden; z-index: 1; }
        .btn-check { background: linear-gradient(90deg, #0055ff, #00aaff); box-shadow: 0 4px 15px rgba(0, 170, 255, 0.4); }
        .btn-check:hover { background: linear-gradient(90deg, #00aaff, #00f3ff); box-shadow: 0 6px 20px rgba(0, 243, 255, 0.6); transform: scale(1.02); }
        
        .btn-ghost { background:transparent; border:1px solid rgba(255,255,255,0.1); color:#9ca3af; padding:12px; border-radius:10px; cursor:pointer; font-weight:600; transition: all 0.2s; font-family: 'Rajdhani', sans-serif; text-transform: uppercase; letter-spacing: 1px; }
        .btn-ghost:hover { background: rgba(255,255,255,0.05); color: #fff; border-color: rgba(255,255,255,0.3); }
        
        .msg { text-align:center; margin-top:15px; min-height:20px; font-size:15px; font-weight: bold; }
        .msg.success { color:#34d399; text-shadow: 0 0 8px rgba(52,211,153,0.5); }
        .msg.error { color:#f87171; text-shadow: 0 0 8px rgba(248,113,113,0.5); }
        .small { font-size:13px; color:#6b7280; text-align:center; margin-top:10px; margin-bottom: 15px;}

        /* FRAME GAME V√Ä N√öT M·ªû TOOL */
        #game-frame { width:100%; height:100vh; border: none; display:block; filter:none; }
        #toggle-tool { position:fixed; top:15px; right:15px; z-index:10000; padding:12px 18px; background: linear-gradient(45deg, var(--neon-purple), var(--neon-blue)); color:white; border:none; border-radius:10px; cursor:pointer; font-weight:bold; display:none; font-family: 'Orbitron', sans-serif; box-shadow: 0 0 20px rgba(0, 243, 255, 0.5); text-transform: uppercase; letter-spacing: 1px; animation: pulse-btn 2s infinite; }
        @keyframes pulse-btn { 0% { box-shadow: 0 0 10px rgba(0,243,255,0.4); } 50% { box-shadow: 0 0 25px rgba(0,243,255,0.8); } 100% { box-shadow: 0 0 10px rgba(0,243,255,0.4); } }

        /* PANEL TOOL N·ªîI */
        #tool-panel { position:absolute; top:15px; right:15px; width:360px; min-width:260px; min-height:150px; background: var(--bg-glass); color: #fff; padding: 0; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.9), inset 0 0 15px rgba(0,243,255,0.1); border: 1px solid var(--border-glass); z-index:9999; overflow: hidden; backdrop-filter: blur(12px); resize: both; transform-origin: top right; transform: scale(var(--panel-scale)); touch-action:none; display:none; font-family: 'Rajdhani', sans-serif; }
        #tool-panel.horizontal { width: 580px; }
        #tool-panel.horizontal .pred-grid { grid-template-columns: 1fr 1fr 1fr; }
        #tool-panel.horizontal .pred-final { grid-column: span 1; }

        @keyframes flash-vip { 0% { border-color: var(--gold); box-shadow: 0 0 10px rgba(255,170,0,0.3); } 50% { border-color: #ff3333; box-shadow: 0 0 25px rgba(255,51,51,0.9); } 100% { border-color: var(--gold); box-shadow: 0 0 10px rgba(255,170,0,0.3); } }
        
        #tool-panel.compact-mode { width: 260px !important; min-width: 220px; }
        #tool-panel.compact-mode #panel-settings, #tool-panel.compact-mode .hide-on-compact { display: none !important; }
        #tool-panel.compact-mode .pred-grid { display: flex; flex-direction: column; gap: 8px; }
        #tool-panel.compact-mode .pred-box { display: flex; justify-content: space-between; align-items: center; padding: 10px 14px; border-radius: 8px; }
        #tool-panel.compact-mode .pred-title { font-size: 13px; text-align: left; margin: 0; color: #9ca3af; font-family: 'Rajdhani', sans-serif; }
        #tool-panel.compact-mode .pred-value { font-size: 18px; font-weight: 900; font-family: 'Orbitron', sans-serif; }
        #tool-panel.compact-mode .pred-final { background: linear-gradient(90deg, rgba(255,170,0,0.1), rgba(255,51,51,0.1)); border: 1px solid var(--gold); animation: flash-vip 1.5s infinite; }
        #tool-panel.compact-mode .warn-box { font-size: 12px; padding: 8px; margin-bottom: 8px; text-align: center; font-weight: bold; }

        .panel-header { background: linear-gradient(90deg, #0f172a, #1e1b4b); padding:14px 16px; display:flex; justify-content:space-between; align-items:center; gap:8px; border-bottom: 2px solid var(--neon-purple); cursor: grab; }
        .panel-header:active { cursor: grabbing; }
        .header-left { display:flex; gap:8px; align-items:center; }
        .header-title { font-weight:900; text-transform: uppercase; font-family: 'Orbitron', sans-serif; color: #fff; text-shadow: 0 0 8px rgba(255,255,255,0.5); font-size: 15px;}
        .expire-badge { font-size:12px; background:rgba(0,0,0,0.5); padding:6px 10px; border-radius:6px; color:var(--neon-blue); border: 1px solid rgba(0,243,255,0.3); font-weight: 600; font-family: 'Orbitron', sans-serif;}
        
        .controls button { background: transparent; border: none; color: #9ca3af; cursor: pointer; font-size: 16px; padding: 4px; transition: color 0.2s; }
        .controls button:hover { color: #fff; text-shadow: 0 0 5px #fff; }
        
        .panel-body { padding:16px; overflow:auto; max-height:calc(100% - 60px); display:flex; flex-direction:column; gap:14px; }
        #btn-auto{ width:100%; padding:14px; background:linear-gradient(90deg, #ffaa00, #ff5500); color:#000; font-weight:900; border:none; border-radius:10px; cursor:pointer; font-family: 'Orbitron', sans-serif; font-size: 14px; text-transform: uppercase; box-shadow: 0 4px 15px rgba(255,170,0,0.4); transition: all 0.2s; }
        #btn-auto:hover { filter: brightness(1.1); box-shadow: 0 6px 20px rgba(255,170,0,0.6); }
        
        .select-row { display:flex; gap:10px; align-items:center; font-size: 14px; font-weight: 600; color: #cbd5e1; }
        select { background: rgba(0,0,0,0.5); color: #fff; border: 1px solid rgba(255,255,255,0.2); padding: 6px 10px; border-radius: 6px; outline: none; font-family: 'Rajdhani', sans-serif; font-weight: bold; }
        .seq-text{ letter-spacing:4px; font-family:'Orbitron', monospace; color:var(--gold); font-weight:700; font-size: 15px; text-shadow: 0 0 5px rgba(255,170,0,0.5); }

        .info-row { background: rgba(0,0,0,0.4); padding:12px; border-radius:10px; font-size:15px; border:1px solid rgba(255,255,255,0.05); box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        
        /* THANH T·ªà L·ªÜ % */
        .bar-container { width:100%; height:32px; background:#111827; border-radius:16px; display:flex; overflow:hidden; border:2px solid #374151; box-shadow: 0 0 10px rgba(0,0,0,0.5); }
        .bar-tai { height:100%; display:flex; align-items:center; padding-left:12px; background:linear-gradient(90deg, #991b1b, #ef4444); color:#fff; font-weight: bold; font-family: 'Orbitron', sans-serif; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: inset -5px 0 10px rgba(0,0,0,0.2); }
        .bar-xiu { height:100%; display:flex; align-items:center; justify-content:flex-end; padding-right:12px; background:linear-gradient(90deg, #0369a1, #3b82f6); color:#fff; font-weight: bold; font-family: 'Orbitron', sans-serif; transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: inset 5px 0 10px rgba(0,0,0,0.2); }
        
        .pred-grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
        .pred-box{ background: rgba(0,0,0,0.5); padding:14px 10px; border-radius:10px; text-align:center; border:1px solid rgba(255,255,255,0.08); box-shadow: inset 0 0 15px rgba(0,0,0,0.4); }
        .pred-title { font-size: 12px; color: #9ca3af; text-transform: uppercase; font-weight: bold; letter-spacing: 1px; margin-bottom: 6px; }
        .pred-value { font-size: 22px; font-family: 'Orbitron', sans-serif; font-weight: 900; }
        
        .pred-final{ grid-column:span 2; background:linear-gradient(135deg, rgba(30,27,75,0.8), rgba(15,23,42,0.9)); border:1px solid var(--gold); padding:16px; position: relative; overflow: hidden; }
        .pred-final::after { content:''; position:absolute; top:0; left:-100%; width:50%; height:100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); animation: shine 3s infinite; }
        @keyframes shine { 100% { left: 200%; } }
        
        .color-tai { color: #f87171; text-shadow: 0 0 10px rgba(248,113,113,0.6); }
        .color-xiu { color: #60a5fa; text-shadow: 0 0 10px rgba(96,165,250,0.6); }

        .hint-box{ text-align:center; font-size:15px; color:#fff; background:rgba(255,170,0,0.1); padding:10px; border-radius:8px; border: 1px dashed rgba(255,170,0,0.3); }

        .control-row { display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top: 4px; }
        .tiny { font-size:13px; color:#9ca3af; font-weight: 500; }
        .tiny label { cursor: pointer; display: flex; align-items: center; gap: 4px; }
        .toggle-btn { padding:8px 12px; border-radius:8px; border:1px solid #4b5563; background:rgba(0,0,0,0.4); color:#d1d5db; cursor:pointer; font-family: 'Rajdhani', sans-serif; font-weight: bold; transition: all 0.2s; }
        .toggle-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }
        .toggle-btn.active { background:var(--neon-blue); color:#000; border-color:var(--neon-blue); box-shadow: 0 0 10px rgba(0,243,255,0.4); }

        #toast-container { position: fixed; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 100000; pointer-events: none; }
        .toast { background: var(--bg-glass); color: #fff; padding: 14px 24px; border-radius: 10px; border-left: 4px solid var(--neon-blue); box-shadow: 0 8px 25px rgba(0,0,0,0.8); font-size: 15px; font-weight: 600; font-family: 'Rajdhani', sans-serif; backdrop-filter: blur(10px); animation: toast-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards, toast-out 0.4s forwards 3s; }
        .toast.error { border-left-color: #ef4444; }
        .toast.success { border-left-color: #10b981; }
        @keyframes toast-in { from { opacity: 0; transform: translateX(100%) scale(0.9); } to { opacity: 1; transform: translateX(0) scale(1); } }
        @keyframes toast-out { from { opacity: 1; transform: translateX(0); } to { opacity: 0; transform: translateX(100%); } }

        @media (max-width:720px) {
            #toggle-tool { right:12px; top:12px; padding: 10px 14px; font-size: 12px; }
            #tool-panel{ left:8px; right:8px; width:auto; min-width:auto; transform-origin:top center; }
            #tool-panel.horizontal { width: auto; }
            #tool-panel.horizontal .pred-grid { grid-template-columns: 1fr 1fr; }
            #tool-panel.horizontal .pred-final { grid-column: span 2; }
            .panel-body{ padding:12px; max-height:65vh; }
            .price-item { font-size: 11px; padding: 8px 2px; }
            .game-grid { gap: 10px; }
            .btn-game { padding: 15px 5px; font-size: 12px;}
            .btn-game img { width: 40px; height: 40px; }
        }
    </style>
</head>
<body>

    <div id="toast-container"></div>

    <div id="gameSelectOverlay" class="overlay" role="dialog" aria-modal="true">
        <div class="panel-card" role="document">
            <h2>H·ªÜ TH·ªêNG D·ª∞ ƒêO√ÅN VIP</h2>
            <div class="sub">Ch·ªçn c·ªïng game m√† b·∫°n mu·ªën d·ª± ƒëo√°n</div>
            
            <div class="game-grid">
                <button id="btn-select-lc79" class="btn-game bg-lc79">
                    <img src="https://i.postimg.cc/NGKy82K4/lc79.webp" alt="LC79">
                    <span>M·ªû TOOL LC79</span>
                </button>
                <button id="btn-select-xd88" class="btn-game bg-xd88">
                    <img src="https://i.postimg.cc/wMCkTgVs/xocdia88.png" alt="XOCDIA88">
                    <span>M·ªû TOOL XOCDIA88</span>
                </button>
                <button id="btn-select-betvip" class="btn-game bg-betvip">
                    <img src="https://i.postimg.cc/Nj4NDCNW/betvip.webp" alt="BETVIP">
                    <span>M·ªû TOOL BETVIP</span>
                </button>
                <button id="btn-select-sunwin" class="btn-game bg-sunwin">
                    <img src="https://i.postimg.cc/y6wrZ8xx/IMG-7874.jpg" alt="SUNWIN">
                    <span>M·ªû TOOL SUNWIN</span>
                </button>
            </div>
            
        </div>
    </div>

    <div id="entryOverlay" class="overlay" role="dialog" aria-modal="true" style="display:none;">
        <div class="panel-card" role="document">
            <h2 id="entryTitle">X√ÅC TH·ª∞C KEY VIP <span id="gameNameDisplay" style="color:var(--neon-blue); margin-left: 8px; text-shadow: 0 0 10px rgba(0,243,255,0.6);"></span></h2>
            <div class="sub">Nh·∫≠p m√£ Key truy c·∫≠p m√°y ch·ªß <span id="gameNameSub" style="font-weight:bold; color:#fff;"></span></div>

            <div class="price-grid" aria-hidden="false">
                <div class="price-item"><div>19K</div><div>1 Ng√†y</div></div>
                <div class="price-item"><div>49K</div><div>7 Ng√†y</div></div>
                <div class="price-item"><div>99K</div><div>30 Ng√†y</div></div>
                <div class="price-item" style="border-color: var(--neon-purple); box-shadow: inset 0 0 15px rgba(188,19,254,0.1);">
                    <div style="color: var(--neon-purple); text-shadow: 0 0 5px rgba(188,19,254,0.5);">199K</div><div>Vƒ©nh vi·ªÖn</div>
                </div>
            </div>

            <div style="margin-top:6px">
                <div class="input-row">
                    <input id="keyInput" type="text" placeholder="Nh·∫≠p Key ƒë·ªãnh d·∫°ng KEY-XXXX..." autocomplete="off" />
                    <button id="checkBtn" class="btn btn-check">KI·ªÇM TRA</button>
                </div>
                <div id="entryMsg" class="msg"></div>
                <div class="small" style="margin-bottom: 15px;">‚ö†Ô∏è HWID SECURE: Key s·∫Ω b·ªã kh√≥a vƒ©nh vi·ªÖn theo thi·∫øt b·ªã hi·ªán t·∫°i.</div>
                <button id="backToGameSelectBtn" class="btn-ghost" style="width:100%;">‚¨Ö CH·ªåN L·∫†I SERVER GAME</button>
            </div>
        </div>
    </div>

    <iframe id="game-frame" src="about:blank" style="width:100%;height:100vh;border:0;display:none;"></iframe>
    <button id="toggle-tool" onclick="togglePanel()">‚öô M·ªû MENU TOOL</button>

    <div id="tool-panel" aria-hidden="true">
        <div class="panel-header" id="panel-header">
            <div class="header-left"><div class="header-title" id="tool-title">‚ö° VIP PREDICTOR</div></div>
            <div style="display:flex;align-items:center;gap:8px">
                <div id="expireBadge" class="expire-badge" title="Th·ªùi h·∫°n key">Key: --</div>
                <div class="controls">
                    <button class="icon" title="Thu g·ªçn" onclick="toggleCompactMode()">‚è¨</button>
                    <button class="icon" title="Thu nh·ªè" onclick="changeScale(-0.1)">‚àí</button>
                    <button class="icon" title="Ph√≥ng to" onclick="changeScale(0.1)">+</button>
                    <button class="icon" title="Reset" onclick="resetScale()">R</button>
                    <button class="icon" id="orientBtn" title="Chuy·ªÉn ngang" onclick="toggleOrientation()">‚Üî</button>
                    <button class="close-btn" onclick="togglePanel()">√ó</button>
                </div>
            </div>
        </div>

        <div class="panel-body" id="panel-body">
            <div style="flex: 0 0 100%;"><button id="btn-auto" onclick="fetchApiAndPredict()">üîÑ K√çCH HO·∫†T QU√âT C·∫¶U</button></div>

            <div id="panel-settings" style="display:flex; flex-direction:column; gap:12px;">
                <div class="select-row">
                    <label>Chu·ªói ph√¢n t√≠ch:</label>
                    <select id="seq-length-select">
                        <option value="11">11 Tay</option><option value="12">12 Tay</option><option value="13" selected>13 Tay (Chu·∫©n)</option><option value="14">14 Tay</option>
                    </select>
                </div>
                <div class="select-row">
                    <label>Lu·ªìng D·ªØ li·ªáu:</label>
                    <select id="api-source-select">
                        <option value="normal">Server Th∆∞·ªùng</option><option value="md5">Server MD5</option>
                    </select>
                </div>
                <div class="control-row tiny">
                    <label><input type="checkbox" id="skip-dice-checkbox" /> T·∫Øt ph√¢n t√≠ch X√∫c X·∫Øc</label>
                    <label><input type="checkbox" id="hide-suggestion-checkbox" /> ·∫®n th√¥ng b√°o Nh√∫ng</label>
                </div>
                <div class="control-row tiny">
                    <label><input type="checkbox" id="auto-refresh-checkbox" /> Auto Get (10s/l·∫ßn)</label>
                    <label><input type="checkbox" id="sound-alert-checkbox" checked /> √Çm thanh C·∫£nh b√°o</label>
                </div>

                <button id="btn-advanced-toggle" class="toggle-btn" style="width:100%; border-color: var(--neon-purple); color: var(--neon-purple);">üõ†Ô∏è THI·∫æT L·∫¨P N√ÇNG CAO</button>

                <div id="advanced-section" style="display:none; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.05);">
                    <div class="control-row tiny" style="margin-bottom: 8px;">
                        <label><input type="checkbox" id="invert-chain-checkbox" /> ƒê·∫£o ng∆∞·ª£c Chu·ªói Thu·∫≠t to√°n</label>
                        <label><input type="checkbox" id="invert-final-checkbox" /> ƒê·∫£o ng∆∞·ª£c K·∫øt qu·∫£ Cu·ªëi</label>
                    </div>
                    <div class="control-row">
                        <button id="btn-invert-all" class="toggle-btn" style="flex: 1;">B·∫ª C·∫ßu To√†n Di·ªán</button>
                        <button id="btn-invert-chain" class="toggle-btn" style="flex: 1;">B·∫ª M·∫°ch Chu·ªói</button>
                    </div>
                </div>

                <div class="select-row" style="align-items:flex-start; gap:10px;">
                    <label style="align-self:flex-start; margin-top: 8px;">Ghi nh·ªõ:</label>
                    <textarea id="annotation-input" rows="2" style="flex:1; padding:10px; border-radius:8px; background:rgba(0,0,0,0.6); border:1px solid rgba(0,243,255,0.2); color:#fff; resize:vertical; font-family: 'Rajdhani', sans-serif;" placeholder="Nh·∫≠p ghi ch√∫ tay c·∫ßu..."></textarea>
                </div>
            </div>
            <div id="result-box" style="flex:1 1 auto;"><div style="text-align:center;color:#6b7280;padding:30px 0; font-family: 'Orbitron', sans-serif; letter-spacing: 1px;"><i>ƒêANG CH·ªú L·ªÜNH QU√âT...</i></div></div>
        </div>
    </div>

<script>
// ================= B·∫¢O M·∫¨T CH·ªêNG F12 & CHU·ªòT PH·∫¢I =================
document.addEventListener('contextmenu', event => event.preventDefault()); 
document.addEventListener('keydown', function(e) {
    if(e.keyCode === 123) { e.preventDefault(); return false; } 
    if(e.ctrlKey && e.shiftKey && e.keyCode === 73) { e.preventDefault(); return false; } 
    if(e.ctrlKey && e.shiftKey && e.keyCode === 74) { e.preventDefault(); return false; } 
    if(e.ctrlKey && e.keyCode === 85) { e.preventDefault(); return false; } 
});

// ================= B·∫™Y DEBUGGER CH·ªêNG SOI CODE =================
setInterval(function() {
    (function() { return false; }['constructor']('debugger')());
}, 50);

const KEY_SERVER_URL = "https://vip-key-server.onrender.com";
const HWID_SECRET = "MY_SUPER_SECRET_HWID_KEY_2026"; 

window.lastDataString = ""; 
let selectedGame = ''; 
let sessionToken = null; 
let currentKey = null;

function generateSignature(hwid, timestamp) {
    return CryptoJS.HmacSHA256(hwid + timestamp, HWID_SECRET).toString();
}

function showToast(msg, type = 'info') {
    const container = document.getElementById('toast-container');
    const toast = document.createElement('div');
    toast.className = `toast ${type}`;
    toast.innerHTML = msg;
    container.appendChild(toast);
    setTimeout(() => toast.remove(), 3500);
}

let audioCtx = null;
function playBeep(type) {
    try {
        if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        if (audioCtx.state === 'suspended') audioCtx.resume();
        const osc = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        osc.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        if (type === 'warn') { osc.type = 'square'; osc.frequency.setValueAtTime(400, audioCtx.currentTime); osc.frequency.exponentialRampToValueAtTime(150, audioCtx.currentTime + 0.3); gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime); gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.3); osc.start(audioCtx.currentTime); osc.stop(audioCtx.currentTime + 0.3);
        } else { osc.type = 'sine'; osc.frequency.setValueAtTime(600, audioCtx.currentTime); osc.frequency.exponentialRampToValueAtTime(1000, audioCtx.currentTime + 0.1); gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime); gainNode.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.2); osc.start(audioCtx.currentTime); osc.stop(audioCtx.currentTime + 0.2); }
    } catch(e) {}
}

async function getHWID() {
    let id = localStorage.getItem("device_hw");
    if(id) return id;
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    ctx.textBaseline = "top"; ctx.font = "14px 'Arial'"; ctx.textBaseline = "alphabetic";
    ctx.fillStyle = "#f60"; ctx.fillRect(125,1,62,20);
    ctx.fillStyle = "#069"; ctx.fillText("vip-tool", 2, 15);
    ctx.fillStyle = "rgba(102, 204, 0, 0.7)"; ctx.fillText("vip-tool", 4, 17);
    const dataURL = canvas.toDataURL();
    const str = navigator.userAgent + screen.width + "x" + screen.height + navigator.language + dataURL;
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
        const char = str.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; 
    }
    id = "HWID-" + Math.abs(hash).toString(16).toUpperCase();
    localStorage.setItem("device_hw", id);
    return id;
}

const gameSelectOverlay = document.getElementById("gameSelectOverlay");
const entryOverlay = document.getElementById("entryOverlay");
const entryMsg = document.getElementById("entryMsg");
const checkBtn = document.getElementById("checkBtn");
const keyInput = document.getElementById("keyInput");
const btnSelectLc79 = document.getElementById("btn-select-lc79");
const btnSelectXd88 = document.getElementById("btn-select-xd88");
const btnSelectBetvip = document.getElementById("btn-select-betvip");
const btnSelectSunwin = document.getElementById("btn-select-sunwin");
const backToGameSelectBtn = document.getElementById("backToGameSelectBtn");
const gameNameDisplay = document.getElementById("gameNameDisplay");
const gameNameSub = document.getElementById("gameNameSub");
const expireBadge = document.getElementById("expireBadge");
const gameFrame = document.getElementById("game-frame");
const toolPanel = document.getElementById("tool-panel");
const toggleBtn = document.getElementById("toggle-tool");
const toolTitle = document.getElementById("tool-title");

const invertChainCheckbox = () => document.getElementById('invert-chain-checkbox');
const invertFinalCheckbox = () => document.getElementById('invert-final-checkbox');
const skipDiceCheckbox = () => document.getElementById('skip-dice-checkbox');
const hideSuggestionCheckbox = () => document.getElementById('hide-suggestion-checkbox');
const annotationInput = () => document.getElementById('annotation-input');
const btnInvertAll = document.getElementById('btn-invert-all');
const btnInvertChain = document.getElementById('btn-invert-chain');

function show(el){ el.style.display = ""; }
function hide(el){ el.style.display = "none"; }

let expireTimer = null;
let autoRefreshInterval = null;

btnSelectLc79.addEventListener("click", () => { selectedGame = 'lc79'; gameNameDisplay.innerText = "LC79"; gameNameSub.innerText = "LC79"; hide(gameSelectOverlay); show(entryOverlay); });
btnSelectXd88.addEventListener("click", () => { selectedGame = 'xd88'; gameNameDisplay.innerText = "XOCDIA88"; gameNameSub.innerText = "XOCDIA88"; hide(gameSelectOverlay); show(entryOverlay); });
btnSelectBetvip.addEventListener("click", () => { selectedGame = 'betvip'; gameNameDisplay.innerText = "BETVIP"; gameNameSub.innerText = "BETVIP"; hide(gameSelectOverlay); show(entryOverlay); });
if (btnSelectSunwin) { btnSelectSunwin.addEventListener("click", () => { selectedGame = 'sunwin'; gameNameDisplay.innerText = "SUNWIN"; gameNameSub.innerText = "SUNWIN"; hide(gameSelectOverlay); show(entryOverlay); }); }
backToGameSelectBtn.addEventListener("click", () => { hide(entryOverlay); show(gameSelectOverlay); keyInput.value = ""; entryMsg.innerText = ""; });

document.getElementById('auto-refresh-checkbox').addEventListener('change', (e) => {
    if(e.target.checked) {
        autoRefreshInterval = setInterval(fetchApiAndPredict, 10000); 
        showToast('ƒê√£ b·∫≠t t·ª± ƒë·ªông l·∫•y d·ªØ li·ªáu (10s)', 'success');
        fetchApiAndPredict(); 
    } else {
        clearInterval(autoRefreshInterval);
        showToast('ƒê√£ t·∫Øt t·ª± ƒë·ªông l·∫•y d·ªØ li·ªáu', 'success');
    }
});

function startExpireCountdown(expireTs){
    if(expireTimer) clearInterval(expireTimer);
    function update(){
        const now = Date.now(); const diff = expireTs - now;
        if(diff <= 0){ 
            expireBadge.innerText = "H·∫æT H·∫†N"; 
            expireBadge.style.color = "#f87171";
            clearInterval(expireTimer); 
            showToast("‚è≥ M√É KEY ƒê√É H·∫æT H·∫†N. NG·∫ÆT K·∫æT N·ªêI...", "error");
            setTimeout(() => location.reload(), 2000);
            return; 
        }
        const totalSec = Math.floor(diff/1000);
        const days = Math.floor(totalSec / 86400), hours = Math.floor((totalSec % 86400) / 3600), mins = Math.floor((totalSec % 3600) / 60);
        expireBadge.innerText = (days>0? days+"D ":"") + String(hours).padStart(2,"0")+":"+String(mins).padStart(2,"0");
    } 
    update(); 
    expireTimer = setInterval(update, 1000);
}

async function checkKeyFlow(){
    const key = (keyInput.value || "").trim();
    if(!key){ entryMsg.className="msg error"; entryMsg.innerText="! CH∆ØA NH·∫¨P KEY KH·ªöP L·ªÜNH"; return; }
    entryMsg.className="msg"; entryMsg.innerText="ƒêANG GI·∫¢I M√É B·∫¢O M·∫¨T..."; checkBtn.disabled = true;
    try{
        const hwid = await getHWID(); 
        const timestamp = Date.now();
        const signature = generateSignature(hwid, timestamp);

        const resp = await fetch(KEY_SERVER_URL + "/check-key", {
            method: "POST", headers: {"Content-Type":"application/json"},
            body: JSON.stringify({ key, hwid, game: selectedGame, timestamp, signature })
        });
        
        const data = await resp.json();
        if(data && data.success){
            sessionToken = data.token;
            currentKey = key;
            if(data.expire) startExpireCountdown(data.expire); else expireBadge.innerText = "VIP ‚àû";
            
            entryMsg.className = "msg success";
            entryMsg.innerText = `‚úîÔ∏è X√ÅC TH·ª∞C TH√ÄNH C√îNG [${selectedGame.toUpperCase()}]. ƒêANG CH√àN SCRIPT...`;
            setTimeout(()=> { hide(entryOverlay); openGameFrame(selectedGame); }, 1200);
        } else {
            entryMsg.className="msg error"; entryMsg.innerText = data && data.message ? ("‚ùå " + data.message) : "L·ªñI: KEY KH√îNG H·ª¢P L·ªÜ / SAI SERVER";
        }
    }catch(err){ entryMsg.className="msg error"; entryMsg.innerText = "L·ªñI M·∫†NG: KH√îNG TH·ªÇ K·∫æT N·ªêI M√ÅY CH·ª¶"; } finally { checkBtn.disabled = false; }
}

keyInput.addEventListener("keydown", (e) => { if(e.key === "Enter") checkKeyFlow(); });
checkBtn.addEventListener("click", checkKeyFlow);

function openGameFrame(gameType) {
    if(gameType === 'lc79') { gameFrame.src = "https://lc79b.bet/"; toolTitle.innerText = "‚ö° LC79 PREDICTOR"; } 
    else if(gameType === 'xd88') { gameFrame.src = "https://play.xocdia88.green/"; toolTitle.innerText = "‚ö° XD88 PREDICTOR"; }
    else if(gameType === 'betvip') { gameFrame.src = "https://play.betvip.fit/"; toolTitle.innerText = "‚ö° BETVIP PREDICTOR"; }
    else if(gameType === 'sunwin') { gameFrame.src = "https://web.sunwin.lt/?affId=Sunwin"; toolTitle.innerText = "‚ö° SUNWIN PREDICTOR"; }
    show(gameFrame);
    setTimeout(()=>{ toolPanel.style.display = "block"; toolPanel.setAttribute("aria-hidden","false"); toggleBtn.style.display = "none"; window.lastDataString = ""; }, 300);
}

function togglePanel(){
    if(toolPanel.style.display === "none" || toolPanel.getAttribute('aria-hidden') === 'true'){ toolPanel.style.display = "block"; toolPanel.setAttribute('aria-hidden','false'); toggleBtn.style.display = "none"; } 
    else { toolPanel.style.display = "none"; toolPanel.setAttribute('aria-hidden','true'); toggleBtn.style.display = "block"; }
}

document.querySelector(".close-btn").addEventListener("click", ()=> { togglePanel(); });

const GOI_Y_NGUONG = [ [90, "ALL IN (MAX VIP)"], [70, "V√ÄO TI·ªÄN (SAFE)"], [60, "TEST NH·∫∏ (RISK)"] ];
function goiYDat(du_doan, percent) {
    if(du_doan === "Kh√¥ng r√µ") return "SKIP (B·ªé QUA)";
    for (let i = 0; i < GOI_Y_NGUONG.length; i++) {
        if (percent >= GOI_Y_NGUONG[i][0]) return percent < 70 ? `${GOI_Y_NGUONG[i][1]} - RATE LOW` : GOI_Y_NGUONG[i][1];
    } return "SKIP (B·ªé QUA)";
}

function duDoanTuXucXac(dices) {
    if (!dices || dices.length !== 3) return ["Kh√¥ng r√µ", null];
    const tong = dices[0] + dices[1] + dices[2];
    if (tong >= 11 && tong <= 17) return ["T√†i", tong];
    if (tong >= 4 && tong <= 10) return ["X·ªâu", tong];
    return ["Kh√¥ng r√µ", tong];
}

function duDoanTongHop(kq_chuoi, xuc_xac) {
    let kq_xx = "Kh√¥ng r√µ", tong_xx = null;
    if (xuc_xac && xuc_xac.length === 3) { const tmp = duDoanTuXucXac(xuc_xac); kq_xx = tmp[0]; tong_xx = tmp[1]; }
    let ket_qua = (kq_chuoi === kq_xx && kq_chuoi !== "Kh√¥ng r√µ") ? kq_chuoi : (kq_chuoi !== "Kh√¥ng r√µ" && kq_xx === "Kh√¥ng r√µ") ? kq_chuoi : (kq_chuoi === "Kh√¥ng r√µ" && kq_xx !== "Kh√¥ng r√µ") ? kq_xx : "Kh√¥ng r√µ";
    return { ket_qua, kq_xx, tong_xx };
}

function getMlsClass(kq) { return (kq === "T√†i" || kq === "T") ? "color-tai" : (kq === "X·ªâu" || kq === "X") ? "color-xiu" : ""; }
function invertKQ(k){ if(!k) return k; return (k === 'T√†i' || k === 'T' || k === 'TAI' ) ? 'X·ªâu' : (k === 'X·ªâu' || k === 'X' || k === 'XIU') ? 'T√†i' : k; }

document.getElementById('api-source-select').addEventListener('change', () => { window.lastDataString = ""; document.getElementById("btn-auto").innerHTML = "üîÑ ƒêANG ƒê·ªîI LU·ªíNG API..."; setTimeout(fetchApiAndPredict, 500); });

async function fetchApiAndPredict() {
    const resultBox = document.getElementById("result-box");
    const btn = document.getElementById("btn-auto");
    const source = document.getElementById("api-source-select").value || 'normal';
    const selectedLen = parseInt(document.getElementById("seq-length-select").value, 10) || 13;

    btn.innerHTML = "‚è≥ DECODING DATA..."; btn.style.opacity = "0.7";

    const invertChain = invertChainCheckbox() && invertChainCheckbox().checked;
    const invertFinal = invertFinalCheckbox() && invertFinalCheckbox().checked;
    const skipDice = skipDiceCheckbox() && skipDiceCheckbox().checked;
    const hideSuggestion = hideSuggestionCheckbox() && hideSuggestionCheckbox().checked;
    const annotation = annotationInput() ? annotationInput().value.trim() : '';

    let kq_chuoi = "Kh√¥ng r√µ", pt = 50, px = 50, cau_bip = null, chuoiN = [], lastDice = [];

    try {
        const hwid = await getHWID();
        const timestamp = Date.now();
        const signature = generateSignature(hwid, timestamp);

        const predictResp = await fetch(KEY_SERVER_URL + "/predict", {
            method: "POST",
            headers: { "Content-Type":"application/json", "Authorization": "Bearer " + sessionToken },
            body: JSON.stringify({ 
                source: source, 
                seqLength: selectedLen, 
                invertChain: invertChain,
                timestamp,
                signature,
                game: selectedGame
            })
        });
        const predictData = await predictResp.json();
        
        if (predictData && predictData.success) {
            pt = Number(predictData.ptTai);
            px = Number(predictData.ptXiu);
            kq_chuoi = predictData.ket_qua || kq_chuoi;
            cau_bip = predictData.cau_bip || null;
            chuoiN = predictData.chuoiN || [];
            lastDice = predictData.lastDice || [];
        } else {
            showToast(`API ERROR: ${predictData.message || 'H·ªá th·ªëng gi√°n ƒëo·∫°n.'}`, 'error');
            btn.innerHTML = "üîÑ K√çCH HO·∫†T QU√âT C·∫¶U"; btn.style.opacity = "1"; 
            if (predictData.kicked) {
                setTimeout(() => { location.reload(); }, 2500); 
            }
            return;
        }
    } catch (e) {
        showToast("L·ªñI: M·∫§T K·∫æT N·ªêI T·ªöI SERVER GI·∫¢I M√É.", "error");
        btn.innerHTML = "üîÑ K√çCH HO·∫†T QU√âT C·∫¶U"; btn.style.opacity = "1"; return;
    }

    let currentDataString = chuoiN.join("") + "-" + (lastDice ? lastDice.join("") : "");
    if (window.lastDataString === currentDataString) { showToast("C·∫¶U CH∆ØA NH·∫¢Y. ƒêANG ƒê·ª¢I V√ÅN M·ªöI...", "info"); btn.innerHTML = "üîÑ K√çCH HO·∫†T QU√âT C·∫¶U"; btn.style.opacity = "1"; return; }
    else { if (window.lastDataString !== "") showToast("PH√ÅT HI·ªÜN T√çN HI·ªÜU! ƒêANG √âP DATA...", "success"); window.lastDataString = currentDataString; }

    const invertAllActive = btnInvertAll.classList.contains('active');
    const invertChainBtnActive = btnInvertChain.classList.contains('active');

    if(invertChainBtnActive && !invertChain) { kq_chuoi = invertKQ(kq_chuoi); let temp = pt; pt = px; px = temp; }

    let ketQuaObj = duDoanTongHop(kq_chuoi, skipDice ? null : lastDice);
    let kq_xx = ketQuaObj.kq_xx, tong_xx = ketQuaObj.tong_xx, ket_qua = skipDice ? (kq_chuoi !== 'Kh√¥ng r√µ' ? kq_chuoi : 'Kh√¥ng r√µ') : ketQuaObj.ket_qua;

    if(invertFinal) ket_qua = invertKQ(ket_qua);
    if(invertAllActive) ket_qua = invertKQ(ket_qua);

    const goi_y = goiYDat(ket_qua, Math.max(pt, px));
    const soundEnabled = document.getElementById('sound-alert-checkbox').checked;
    if (soundEnabled) { if (cau_bip) playBeep('warn'); else if (Math.max(pt, px) >= 80) playBeep('high'); }

    resultBox.innerHTML = `
        <div class="info-row hide-on-compact" style="min-width:140px;">
            <div style="color:var(--neon-blue); font-size:12px; margin-bottom:6px; font-weight: bold; letter-spacing: 1px;">SOURCE: <span style="color:#fff;">[ ${source === 'md5' && selectedGame !== 'sunwin' ? 'SERVER MD5' : 'SERVER TH∆Ø·ªúNG'} ]</span> ‚Äî CHU·ªñI ${chuoiN.length} V√ÅN:</div>
            <div class="seq-text">${chuoiN.join("")}</div>
        </div>
        <div class="info-row hide-on-compact" style="min-width:140px;">
            <div style="color:var(--neon-purple); font-size:12px; margin-bottom:6px; font-weight: bold; letter-spacing: 1px;">D·ªÆ LI·ªÜU TAY TR∆Ø·ªöC:</div>
            <div style="font-family: 'Orbitron', sans-serif;">üé≤ POINT: <b style="color:#fff;">${lastDice.length ? lastDice.join(" - ") : "?"}</b> (T·ªîNG <b class="${getMlsClass(kq_xx)}">${tong_xx !== null ? tong_xx : "?"}</b>)</div>
        </div>
        <div style="min-width:200px; margin-bottom: 6px;">
            <div class="bar-container">
                <div class="bar-tai" style="width: ${pt}%">${pt}% T√ÄI</div><div class="bar-xiu" style="width: ${px}%">X·ªàU ${px}%</div>
            </div>
        </div>
        <div class="pred-grid" style="min-width:200px;">
            <div class="pred-box"><div class="pred-title">üìä LOGIC CHU·ªñI</div><div class="pred-value ${getMlsClass(kq_chuoi)}">${kq_chuoi}</div></div>
            <div class="pred-box"><div class="pred-title">üé≤ LOGIC X√öC X·∫ÆC</div><div class="pred-value ${getMlsClass(kq_xx)}">${kq_xx}</div></div>
            <div class="pred-box pred-final">
                <div class="pred-title" style="color: var(--gold); text-shadow: 0 0 5px rgba(255,170,0,0.5);">üî• CH·ªêT K·∫æT QU·∫¢ AI üî•</div>
                <div class="pred-value ${getMlsClass(ket_qua)}" style="font-size: 28px; letter-spacing: 2px;">${ket_qua}</div>
            </div>
        </div>
        <div class="hint-box hide-on-compact" style="min-width:160px; font-weight: bold;">üí° L·ªÜNH TH·ª∞C THI: <span style="color:var(--gold); font-family:'Orbitron', sans-serif;">${hideSuggestion ? '‚Äî (B·ªä ·∫®N B·ªûI ADMIN)' : goi_y}</span></div>
        <div class="hide-on-compact" style="margin-top:12px; font-size:12px; color:#6b7280; font-family:'Rajdhani', sans-serif; font-weight: 600;">
            <div><span style="color:#9ca3af;">MOD C·∫§U H√åNH:</span> ${invertChain ? 'B·∫∫ CHU·ªñI; ' : ''}${invertFinal ? 'B·∫∫ K.QU·∫¢; ' : ''}${skipDice ? 'T·∫ÆT POINT; ' : ''}${btnInvertAll.classList.contains('active') ? '√âP ƒê·∫¢O TO√ÄN DI·ªÜN; ' : ''}${btnInvertChain.classList.contains('active') ? '√âP ƒê·∫¢O CHU·ªñI; ' : ''}</div>
            <div style="margin-top:6px;"><span style="color:#9ca3af;">LOGS USER:</span> ${annotation ? annotation : '‚Äî'}</div>
        </div>
    `;

    if (cau_bip) {
        const warnHtml = document.createElement('div'); warnHtml.className = 'info-row warn-box'; warnHtml.style.border = '1px dashed #f87171'; warnHtml.style.background = 'rgba(248,113,113,0.1)';
        let more = cau_bip === "C·∫ßu b·ªát d√†i b·∫•t th∆∞·ªùng" ? "L·ªÜNH: √âP ƒê·∫¢O K·∫æT QU·∫¢ HO·∫∂C SKIP TAY N√ÄY." : cau_bip === "C·∫ßu nh·ª≠ ƒë·∫£o 1-1-2" ? "L·ªÜNH: B√ÅM NH·ªäP ƒê·∫¢O HO·∫∂C T·∫ÆT AUTO." : "L·ªÜNH: THEO XU H∆Ø·ªöNG B·∫∫ HO·∫∂C CH·ªú NH·ªäP SAU.";
        warnHtml.innerHTML = `<div style="color:#f87171; font-weight:900; font-family:'Orbitron', sans-serif; font-size:14px; text-shadow: 0 0 5px rgba(248,113,113,0.5);">‚ö†Ô∏è ALERT: ${cau_bip.toUpperCase()}</div><div class="hide-on-compact" style="color:#fca5a5; margin-top:8px; font-family:'Rajdhani', sans-serif;">${more}</div>`;
        resultBox.prepend(warnHtml);
    }
    btn.innerHTML = "üîÑ K√çCH HO·∫†T QU√âT C·∫¶U"; btn.style.opacity = "1";
}

btnInvertAll.addEventListener('click', ()=>{ btnInvertAll.classList.toggle('active'); });
btnInvertChain.addEventListener('click', ()=>{ btnInvertChain.classList.toggle('active'); });

const btnAdvancedToggle = document.getElementById('btn-advanced-toggle');
const advancedSection = document.getElementById('advanced-section');
if(btnAdvancedToggle && advancedSection){
    btnAdvancedToggle.addEventListener('click', ()=>{ const isHidden = advancedSection.style.display === 'none'; advancedSection.style.display = isHidden ? 'block' : 'none'; btnAdvancedToggle.innerHTML = isHidden ? 'üõ†Ô∏è ƒê√ìNG THI·∫æT L·∫¨P N√ÇNG CAO' : 'üõ†Ô∏è M·ªû THI·∫æT L·∫¨P N√ÇNG CAO'; });
}

const panel = document.getElementById("tool-panel"); const header = document.getElementById("panel-header");
function toggleCompactMode() { panel.classList.toggle('compact-mode'); }
function toggleOrientation() { panel.classList.toggle('horizontal'); const btn = document.getElementById('orientBtn'); if (panel.classList.contains('horizontal')) btn.title = "Ch·∫ø ƒë·ªô ngang"; else btn.title = "Ch·∫ø ƒë·ªô d·ªçc"; }
function changeScale(delta) { let current = parseFloat(getComputedStyle(panel).getPropertyValue('--panel-scale')) || 1; let next = Math.min(2, Math.max(0.6, +(current + delta).toFixed(2))); panel.style.setProperty('--panel-scale', next); }
function resetScale() { panel.style.setProperty('--panel-scale', 1); }

let isDragging=false, offsetX=0, offsetY=0;
header.addEventListener('mousedown',(e)=>{ isDragging=true; const rect=panel.getBoundingClientRect(); offsetX = e.clientX - rect.left; offsetY = e.clientY - rect.top; panel.style.right='auto'; });
document.addEventListener('mousemove',(e)=>{ if(!isDragging) return; panel.style.left = (e.clientX - offsetX) + 'px'; panel.style.top = (e.clientY - offsetY) + 'px'; });
document.addEventListener('mouseup',()=>{ isDragging=false; });
header.addEventListener('touchstart',(ev)=>{ const t=ev.touches[0]; isDragging=true; const rect=panel.getBoundingClientRect(); offsetX=t.clientX-rect.left; offsetY=t.clientY-rect.top; panel.style.right='auto'; }, {passive:true});
document.addEventListener('touchmove',(ev)=>{ if(!isDragging) return; const t=ev.touches[0]; panel.style.left=(t.clientX-offsetX)+'px'; panel.style.top=(t.clientY-offsetY)+'px'; }, {passive:true});
document.addEventListener('touchend',()=>{ isDragging=false; });

window.addEventListener('load', ()=> { show(gameSelectOverlay); hide(entryOverlay); hide(toolPanel); hide(gameFrame); toggleBtn.style.display='none'; });
window.addEventListener('resize', ()=> { if(toolPanel.style.display === "none" || toolPanel.getAttribute('aria-hidden') === 'true'){ toggleBtn.style.display = 'block'; } else { toggleBtn.style.display = 'none'; } });
</script>
</body>
</html>
